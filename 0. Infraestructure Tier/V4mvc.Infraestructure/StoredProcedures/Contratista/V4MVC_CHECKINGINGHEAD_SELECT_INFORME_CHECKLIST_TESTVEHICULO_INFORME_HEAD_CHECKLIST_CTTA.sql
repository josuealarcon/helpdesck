CREATE PROCEDURE [dbo].[V4MVC_CHECKINGINGHEAD_SELECT_INFORME_CHECKLIST_TESTVEHICULO_INFORME_HEAD_CHECKLIST_CTTA]
(
@ID_TIPO  NVARCHAR(3) = NULL,
@ID_CHECK INT = NULL,
@ID_CHECKING INT = NULL,
@ID_CHECKINGHEAD INT = NULL
) AS
BEGIN


SELECT CHKNGH.ID_CHECKINGHEAD, CHKNGH.ID_TIPO, TP.NOMBRE AS TIPO, CHKNGH.ID_CHECK, CHK.NOMBRE AS CHECKLIST, CHKNGH.ID_CHECKING, 
		CHKNGH.IDENTIFICADOR,TR.TIPO AS TIPOVEHICULO,TY.DSCTIPOV AS NOMBRE_IDENTIFICADOR,TR.EMPRESA, 
		CHKNGH.FECHA, CHKNGH.IDENTIFICADOR, ISNULL(CHKNGH.CORRECTO,'NO') AS CORRECTO, ISNULL(CHKNGH.VALIDADO, '') AS VALIDADO, CHKNGH.USRCREA, W.NOMBRES, W.APELLIDOS 
		FROM CHECK_CHECKINGINGHEAD CHKNGH 
		INNER JOIN [CHECK] CHK ON CHKNGH.ID_TIPO = CHK.ID_TIPO AND CHKNGH.ID_CHECK = CHK.ID_CHECK 
		INNER JOIN CHECK_TIPO TP ON CHK.ID_TIPO = TP.ID_TIPO  
		INNER JOIN TRANSPORT TR  ON CHKNGH.IDENTIFICADOR = TR.PATENTE 
 		INNER JOIN TYPETRANS TY  ON TR.TIPO = TY.IDTIPO LEFT OUTER JOIN WORKERS AS W ON CHKNGH.USRCREA = W.RUT 
		WHERE CHKNGH.ID_TIPO = @ID_TIPO AND CHKNGH.ID_CHECK = @ID_CHECK AND CHKNGH.ID_CHECKING = @ID_CHECKING AND CHKNGH.ID_CHECKINGHEAD = @ID_CHECKINGHEAD
END	
