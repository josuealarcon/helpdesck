CREATE PROCEDURE [dbo].[V4MVC_A056_FORM30_UPDATE_V3_CONTROLLABORAL_CTTA]
(
  @ID				UNIQUEIDENTIFIER = NULL
 ,@USUARIO			NVARCHAR(10)
 ,@ID_CERTIFICADO	INT
) AS
BEGIN
	DECLARE @CURR_FECHA NVARCHAR(8) = convert(NVARCHAR(8), getdate(), 112) /* yyyymmdd */
	DECLARE @CURR_TIEMPOFULL NVARCHAR(8) = convert(NVARCHAR(8), getdate(), 108) /* hh:mm:ss */
	
	IF(@ID IS NOT NULL)
		BEGIN
			UPDATE A056_FORM30
			SET
				ID = @ID,
				VALIDADO = 'NO',
				USUARIO = @USUARIO,
				FECHASUBE = @CURR_FECHA,
				HORASUBE = @CURR_TIEMPOFULL
			WHERE
				ID_CERTIFICADO = @ID_CERTIFICADO
		END
	ELSE
		BEGIN
			UPDATE A056_FORM30
			SET
				VALIDADO = 'NO',
				USUARIO = @USUARIO,
				FECHASUBE = @CURR_FECHA,
				HORASUBE = @CURR_TIEMPOFULL
			WHERE
				ID_CERTIFICADO = @ID_CERTIFICADO
		END
END
