CREATE PROCEDURE [dbo].[V4MVC_CHECKINGINGHEAD_SELECT_INFORME_CHECKLIST_TESTVEHICULODETALLE_INFORME_CHECKLIST_CTTA]
(
@ID_TIPO NVARCHAR(3) = NULL,
@ID_CHECK INT = NULL,
@ID_CHECKING INT = NULL,
@ID_CHECKINGHEAD INT = NULL
) AS
BEGIN

DECLARE @strSQL as nvarchar(MAX)

 SELECT 
 ROW_NUMBER() OVER(ORDER BY CHKDET.ID_CHECKDET DESC) ROWNUMBER
,DESCRIPCION
,VALOR
,(SELECT HORA FROM CHECK_CHECKINGDETAIL WHERE ID_TIPO = CHKNGDET.ID_TIPO AND ID_CHECK = CHKNGDET.ID_CHECK AND ID_CHECKING = CHKNGDET.ID_CHECKING AND ID_CHECKINGHEAD = CHKNGDET.ID_CHECKINGHEAD AND ID_CHECKINGDET = CHKDET.ID_CHECKDET) AS HORA
,(SELECT OBSERVACION FROM CHECK_CHECKINGDETAIL WHERE ID_TIPO = CHKNGDET.ID_TIPO AND ID_CHECK = CHKNGDET.ID_CHECK AND ID_CHECKING = CHKNGDET.ID_CHECKING AND ID_CHECKINGHEAD = CHKNGDET.ID_CHECKINGHEAD AND ID_CHECKINGDET = CHKDET.ID_CHECKDET) AS OBSERVACION
 FROM CHECK_DETAIL CHKDET 
		  INNER JOIN [CHECK_CHECKINGDETAIL] CHKNGDET ON CHKDET.ID_TIPO = CHKNGDET.ID_TIPO AND CHKDET.ID_CHECK = CHKNGDET.ID_CHECK AND CHKDET.ID_CHECKDET = CHKNGDET.ID_CHECKINGDET 
		  WHERE CHKNGDET.ID_TIPO = @ID_TIPO 
		  AND CHKNGDET.ID_CHECK = @ID_CHECK
		  AND CHKNGDET.ID_CHECKING = @ID_CHECKING
		  AND CHKNGDET.ID_CHECKINGHEAD = @ID_CHECKINGHEAD

END	
